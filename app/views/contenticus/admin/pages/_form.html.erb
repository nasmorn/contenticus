<%= f.fields_for :slug, @page.slug do |f| %>

  <%= f.text_field :label %>

  <%= f.text_field(:slug, prepend: (@page.slug.parent.full_path + "/").squeeze("/")) if @page.slug.parent.present? %>

  <% if (options = ::Contenticus::Page.options_for_select(@page)).present? %>
    <%= f.select :parent_id, options %>
  <% end %>

<% end %>

<%= f.fields_for :master_block, @page.master_block do |f| %>
  <%= f.select :locale, Contenticus::Block::LOCALES %>  
  <%= f.select :layout, Contenticus::PageLayout.available %>

  <h2>Content</h2>

  <% f.object.tags.each do |name, options| %>
    <%= field_for_tag(f, name, options) %>
  <% end %>

<% end %>